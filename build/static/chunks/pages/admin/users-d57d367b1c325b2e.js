(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{6459:function(e,t,n){"use strict";var s=n(64836).default,i=n(75263).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(67294)),a=s(n(78423)),l=s(n(65400)),o=n(52545);t.default=e=>{let{type:t,children:n,prefixCls:s,buttonProps:i,close:c,autoFocus:d,emitEvent:u,isSilent:m,quitOnNullishReturnValue:f,actionFn:p}=e,g=r.useRef(!1),h=r.useRef(null),[y,x]=(0,a.default)(!1),onInternalClose=function(){null==c||c.apply(void 0,arguments)};r.useEffect(()=>{let e=null;return d&&(e=setTimeout(()=>{var e;null===(e=h.current)||void 0===e||e.focus()})),()=>{e&&clearTimeout(e)}},[]);let handlePromiseOnOk=e=>{e&&e.then&&(x(!0),e.then(function(){x(!1,!0),onInternalClose.apply(void 0,arguments),g.current=!1},e=>{if(x(!1,!0),g.current=!1,null==m||!m())return Promise.reject(e)}))};return r.createElement(l.default,Object.assign({},(0,o.convertLegacyProps)(t),{onClick:e=>{let t;if(!g.current){if(g.current=!0,!p){onInternalClose();return}if(u){var n;if(t=p(e),f&&!((n=t)&&n.then)){g.current=!1,onInternalClose(e);return}}else if(p.length)t=p(c),g.current=!1;else if(!(t=p())){onInternalClose();return}handlePromiseOnOk(t)}},loading:y,prefixCls:s},i,{ref:h}),n)}},91351:function(e,t,n){"use strict";var s=n(64836).default,i=n(75263).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.withPureRenderTheme=withPureRenderTheme;var r=i(n(67294)),a=s(n(60869)),l=i(n(31929));function withPureRenderTheme(e){return t=>r.createElement(l.default,{theme:{token:{motion:!1,zIndexPopupBase:0}}},r.createElement(e,Object.assign({},t)))}t.default=(e,t,n,s)=>withPureRenderTheme(i=>{let{prefixCls:o,style:c}=i,d=r.useRef(null),[u,m]=r.useState(0),[f,p]=r.useState(0),[g,h]=(0,a.default)(!1,{value:i.open}),{getPrefixCls:y}=r.useContext(l.ConfigContext),x=y(t||"select",o);r.useEffect(()=>{if(h(!0),"undefined"!=typeof ResizeObserver){let e=new ResizeObserver(e=>{let t=e[0].target;m(t.offsetHeight+8),p(t.offsetWidth)}),t=setInterval(()=>{var s;let i=n?`.${n(x)}`:`.${x}-dropdown`,r=null===(s=d.current)||void 0===s?void 0:s.querySelector(i);r&&(clearInterval(t),e.observe(r))},10);return()=>{clearInterval(t),e.disconnect()}}},[]);let v=Object.assign(Object.assign({},i),{style:Object.assign(Object.assign({},c),{margin:0}),open:g,visible:g,getPopupContainer:()=>d.current});return s&&(v=s(v)),r.createElement("div",{ref:d,style:{paddingBottom:u,position:"relative",minWidth:f}},r.createElement(e,Object.assign({},v)))})},64168:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return n(90050)}])},70433:function(e,t,n){"use strict";n.d(t,{Z:function(){return layouts_AdminLayout}});var s=n(85893),i=n(67294),r=n(25675),a=n.n(r),l=n(41664),o=n.n(l),c=n(11163),Header=()=>{let e=(0,c.useRouter)(),defineStyleNav=t=>{let n=e.asPath;return n.split("/")[2]==t?"bg-blue-400 text-white border-blue-200":""};return(0,i.useEffect)(()=>{},[]),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"flex flex-row items-center w-full justify-center gap-4 py-2",children:(0,s.jsxs)(o(),{href:"/",className:"flex flex-row items-center gap-4",children:[(0,s.jsx)(a(),{className:"cursor-pointer",src:"/images/logo-aquaculture-pens.png",alt:"Logo PENS",width:40,height:300}),(0,s.jsx)("h1",{className:"font-bold text-xs",children:"PENS Aquaculture Technology"})]})}),(0,s.jsxs)("ul",{className:"w-full flex flex-row items-center justify-evenly text-xs mt-4 gap-4",children:[(0,s.jsx)("li",{className:"flex-1 text-center rounded py-2 border-b-4 border-blue-800 hover:border-blue-400 ".concat(defineStyleNav("users")),children:(0,s.jsx)(o(),{href:"/admin/users",children:(0,s.jsx)("p",{children:"Users"})})}),(0,s.jsx)("li",{className:"flex-1 text-center rounded py-2 border-b-4 border-blue-800 hover:border-blue-400 ".concat(defineStyleNav("ponds")),children:(0,s.jsx)(o(),{href:"/admin/ponds",children:(0,s.jsx)("p",{children:"Tambak"})})}),(0,s.jsx)("li",{className:"flex-1 text-center rounded py-2 border-b-4 border-blue-800 hover:border-blue-400 ".concat(defineStyleNav("profile")),children:(0,s.jsx)(o(),{href:"/admin/profile",children:(0,s.jsx)("p",{children:"Akun"})})})]})]})},d=n(28487),u=n(11187),layouts_AdminLayout=function(e){let{children:t}=e,n=(0,c.useRouter)(),checkLoggedIn=()=>{let e=d.Z.getCookie("access_token"),t=d.Z.getCookie("username"),s=d.Z.getCookie("role");return e?"admin"==t&&s?void 0:(u.ZP.info({content:"You haven't admin access!"}),n.replace("/dashboard")):(u.ZP.info({content:"You have to logged in first!"}),n.replace("/"))};return(0,i.useEffect)(()=>{checkLoggedIn()},[]),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"m-auto w-11/12 md:w-10/12 lg:8/12 xl:w-6/12",children:[(0,s.jsx)(Header,{}),t]})})}},90050:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Users}});var s=n(85893),i=n(9008),r=n.n(i),a=n(70433),l=n(67294),o=n(56697),ShowUserProfile=function(e){let[t,n]=(0,l.useState)(!1),handleCancel=()=>{n(!1)},i=new Date(e.createdAt).toLocaleString();return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-blue-500 text-white hover:text-blue-500 hover:bg-white border-2 border-blue-500",onClick:()=>{n(!0)},children:"Detail"}),(0,s.jsxs)(o.Z,{title:"Detail User",open:t,footer:[(0,s.jsx)("button",{className:"px-2 py-2 rounded border-2 ml-2 bg-red-500 text-white w-24",onClick:()=>handleCancel(),children:"Tutup"},"ahh")],onCancel:()=>handleCancel(),children:[(0,s.jsxs)("div",{className:"mt-5 mb-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 ",children:"Nama Lengkap"}),(0,s.jsx)("p",{className:"text-gray-900 text-sm",children:e.fullName})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 ",children:"Username"}),(0,s.jsx)("p",{className:"text-gray-900 text-sm",children:e.username})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 ",children:"User ID"}),(0,s.jsx)("p",{className:"text-gray-900 text-sm",children:e.apiKey})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 ",children:"Tanggal Akun Dibuat"}),(0,s.jsx)("p",{className:"text-gray-900 text-sm",children:i})]})]})]})},AdminTable_AdminUsersTable=function(e){return(0,s.jsxs)("tr",{className:"odd:bg-white  even:bg-gray-50  border-b",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:e.iterationNumber}),(0,s.jsx)("td",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap ",children:e.fullName}),(0,s.jsxs)("td",{className:"px-6 py-4 font-medium",children:[" ",e.username]}),(0,s.jsx)("td",{className:"px-6 py-4 text-center",children:(0,s.jsx)(ShowUserProfile,{_id:e._id,fullName:e.fullName,username:e.username,apiKey:e.apiKey,createdAt:e.createdAt,listRefresher:e.listRefresher,iterationNumber:e.iterationNumber})})]})},c=n(12619),d=n(51024),u=n(11187),m=n(4851),f=n(11163),AddNewUsers=function(){let[e,t]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1);(0,f.useRouter)();let[r,a]=(0,l.useState)(""),[p,g]=(0,l.useState)({fullName:"",username:"",password:""}),setCred=(e,t)=>{g({...p,[e]:t})},handleLogin=async()=>{if(r!=p.password)return u.ZP.info("Password konfirmasi tidak sama");i(!0),c.gx.register({data:p,isNotify:!0}).then(()=>handleCancel())},handleCancel=()=>{t(!1)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-green-500 text-white hover:text-green-500 hover:bg-white border-2 border-green-500",onClick:()=>{t(!0)},children:"Tambahkan User"}),(0,s.jsx)(o.Z,{title:"Tambahkan User Baru",open:e,footer:[(0,s.jsx)("button",{className:"px-2 py-2 rounded border-2 ml-2 bg-red-500 text-white w-24",onClick:()=>handleCancel(),children:"Batal"},"ahh"),(0,s.jsx)("button",{onClick:handleLogin,className:"px-2 py-2 rounded border-2 ml-2 bg-green-500 text-white w-24",children:n?(0,s.jsx)(m.default,{}):(0,s.jsx)("p",{children:"Tambah"})},"ahh2")],onCancel:()=>handleCancel(),children:(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"fullname",className:"text-black",children:"Nama Lengkap"}),(0,s.jsx)(d.default,{onChange:e=>setCred("fullName",e.target.value),id:"fullname",name:"fullname"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"text-black",children:"Username"}),(0,s.jsx)(d.default,{onChange:e=>setCred("username",e.target.value),id:"username",name:"username"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"text-black",children:"Password"}),(0,s.jsx)(d.default.Password,{onChange:e=>setCred("password",e.target.value),id:"password",name:"password"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password-conf",className:"text-black",children:"Konfirmasi Password"}),(0,s.jsx)(d.default.Password,{onChange:e=>a(e.target.value),id:"password-conf",name:"password-conf"})]})]})})]})},p=n(28487),AdminUsers=function(){let[e,t]=(0,l.useState)(),[n,i]=(0,l.useState)(),r=(0,f.useRouter)(),getUser=async()=>{c.Q.getAllUserProfiles({isNotify:!0}).then(e=>{if(!e)return;let t=e.data.sort((e,t)=>"admin"===e.username?-1:"admin"===t.username?1:0);i(t)})};return(0,l.useEffect)(()=>{c.Q.getMyProfile({isNotify:!1}).then(e=>{if(!e){p.Z.deleteCookie("access_token"),r.replace("/");return}t(e.data)}),getUser()},[]),(0,s.jsxs)("div",{className:"mt-8 px-2 lg:w-full lg:m-auto lg:mt-8 pb-16",children:[(0,s.jsxs)("div",{className:"w-full mt-16 flex flex-row justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Users"}),(0,s.jsx)(AddNewUsers,{})]}),(0,s.jsx)("div",{className:"mt-4 relative overflow-x-auto shadow-md sm:rounded-lg",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 ",children:[(0,s.jsx)("thead",{className:"text-sm text-gray-700  capitalize bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Id"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Full Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Username"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-center",children:"Action"})]})}),(0,s.jsx)("tbody",{children:null==n?void 0:n.map((e,t)=>(0,l.createElement)(AdminTable_AdminUsersTable,{listRefresher:()=>getUser(),iterationNumber:t+1,...e,key:t}))})]})})]})};function Users(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r(),{children:[(0,s.jsx)("title",{children:"Users - PENS Aquaculture Technology"}),(0,s.jsx)("meta",{name:"description",content:"Pascasarjana Politeknik Elektronika Negeri Surabaya"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)(a.Z,{children:(0,s.jsx)(AdminUsers,{})})]})}},12619:function(e,t,n){"use strict";n.d(t,{gx:function(){return l},SM:function(){return u},C8:function(){return p},ff:function(){return c},jf:function(){return m},Rb:function(){return d},pv:function(){return f},Q:function(){return o},vn:function(){return serviceInstance}});let s="https://be.aquaculturepens.com";var i=n(28487),r=n(11187),a=n(5121);async function login(e){let{data:t}=await serviceInstance(e.isNotify).post("/api/v1/auth/login",e.data);return t}async function register(e){let{data:t}=await serviceInstance(e.isNotify).post("/api/v1/auth/register",e.data);return t}let l={login:login,register:register};async function getAllUserProfiles(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/users/all");return t}async function getMyProfile(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/users");return t}let o={getMyProfile:getMyProfile,getAllUserProfiles:getAllUserProfiles};async function getAllPonds(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/ponds?pondsName="+e.pondsName+"&page="+e.page+"&limit="+e.limit+"&provinceId="+e.provinceId+"&cityId="+e.cityId);return t}async function getAllNoQueryPonds(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/ponds/all-ponds?pondsName="+e.pondsName+"&page="+e.page+"&limit="+e.limit+"&provinceId="+e.provinceId+"&cityId="+e.cityId);return t}async function getPondById(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/ponds/pondsId/"+e.pondsId);return t}async function getAllPondsByCityId(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/ponds/cityId/"+e.cityId);return t}async function createPonds(e){let{data:t}=await serviceInstance(e.isNotify).post("/api/v1/ponds?pondsName",e.data);return t}async function deletePondsById(e){let{data:t}=await serviceInstance(e.isNotify).delete("/api/v1/ponds/pondsId/"+e.pondsId);return t}let c={getAllPonds:getAllPonds,createPonds:createPonds,getAllNoQueryPonds:getAllNoQueryPonds,getAllPondsByCityId:getAllPondsByCityId,deletePondsById:deletePondsById,getPondById:getPondById};async function getAllProvinces(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/provinces?provinceName="+e.provinceName);return t}async function getProvinceById(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/provinces/provinceId/"+e.provinceId);return t}let d={getAllProvinces:getAllProvinces,getProvinceById:getProvinceById};async function getAllCities(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/cities?cityName=");return t}async function getCityById(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/cities/cityId/"+e.cityId);return t}async function getAllCitiesByProvinceId(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/cities/provinceId/"+e.provinceId);return t}let u={getAllCities:getAllCities,getAllCitiesByProvinceId:getAllCitiesByProvinceId,getCityById:getCityById};async function getAllPools(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/pools?poolsName="+e.poolsName);return t}async function createPools(e){let{data:t}=await serviceInstance(e.isNotify).post("/api/v1/pools",e.data);return t}async function getPoolsByPondId(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/pools/pondsId/"+e.pondId);return t}async function getPoolsById(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/pools/poolsId/"+e.poolsId);return t}async function bindPools(e){let{data:t}=await serviceInstance(e.isNotify).put("/api/v1/pools/bind/poolsId/"+e.poolsId,e.data);return t}async function getPoolsByPondIdAdmin(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/pools/pondsIdAdmin/"+e.pondId);return t}let m={getAllPools:getAllPools,getPoolsByPondId:getPoolsByPondId,createPools:createPools,getPoolsById:getPoolsById,getPoolsByPondIdAdmin:getPoolsByPondIdAdmin,bindPools:bindPools};async function getAllSampling(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/sample/poolsId/".concat(e.poolsId,"?from=").concat(e.from,"&to=").concat(e.to,"&limit=").concat(e.limit,"&page=").concat(e.page,"&newestTime=").concat(e.newestTime));return t}async function getTodaySampling(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/sample/poolsId/".concat(e.poolsId,"/today"));return t}let f={getTodaySampling:getTodaySampling,getAllSampling:getAllSampling};async function getAllMonitoring(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/monitor/poolsId/".concat(e.poolsId,"?from=").concat(e.from,"&to=").concat(e.to,"&limit=").concat(e.limit,"&page=").concat(e.page,"&newestTime=").concat(e.newestTime));return t}async function getTodayMonitoring(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/monitor/poolsId/".concat(e.poolsId,"/today"));return t}let p={getTodayMonitoring:getTodayMonitoring,getAllMonitoring:getAllMonitoring};a.Z.create({baseURL:s,timeout:1e4});let serviceInstance=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"":i.Z.getCookie("access_token"),l=a.Z.create({baseURL:s,timeout:1e4,headers:{Authorization:"Bearer "+n,"Access-Control-Allow-Origin":"*"}});return l.interceptors.response.use(function(t){return e&&r.ZP.success({content:t.data.message}),t},function(t){return e&&r.ZP.error({content:t.response.data.message}),t}),l}},28487:function(e,t){"use strict";t.Z={setCookie:(e,t,n)=>{let s="";if(n){let e=new Date;e.setTime(e.getTime()+864e5*n),s="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+s+"; path=/"},getCookie:e=>{let t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let s=n[e];for(;" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return null},deleteCookie:e=>{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}}}},function(e){e.O(0,[486,121,570,617,24,529,697,774,888,179],function(){return e(e.s=64168)}),_N_E=e.O()}]);