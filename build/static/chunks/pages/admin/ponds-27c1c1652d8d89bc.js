(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{62573:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"}},55658:function(e,t,n){"use strict";Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return r}});var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(i,s,r):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(82684)),o=_interop_require_default(n(62573)),s=_interop_require_default(n(32905));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_getRequireWildcardCache=function(e){return e?n:t})(e)}var r=i.forwardRef(function(e,t){var n,r;return i.createElement(s.default,(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}({},e),r=r={ref:t,icon:o.default},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n.push.apply(n,i)}return n})(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}),n))})},73383:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/ponds",function(){return n(2744)}])},14655:function(e,t,n){"use strict";var i=n(28598),o=n(55658);n(82684),t.Z=function(e){let{message:t}=e;return(0,i.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center mt-4",children:[(0,i.jsx)(o.Z,{className:"font-bold text-4xl text-gray-300"}),(0,i.jsx)("p",{className:"font-bold text-2xl text-gray-300 text-center",children:t})]})}},81013:function(e,t,n){"use strict";n.d(t,{Z:function(){return layouts_AdminLayout}});var i=n(28598),o=n(82684),s=n(60071),r=n.n(s),a=n(12691),l=n.n(a),c=n(34376),Header=()=>{let e=(0,c.useRouter)(),defineStyleNav=t=>{let n=e.asPath;return n.split("/")[2]==t?"bg-blue-400 text-white border-blue-200":""};return(0,o.useEffect)(()=>{},[]),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:"flex flex-row items-center w-full justify-center gap-4 py-2",children:(0,i.jsxs)(l(),{href:"/",className:"flex flex-row items-center gap-4",children:[(0,i.jsx)(r(),{className:"cursor-pointer",src:"/images/logo-aquaculture-pens.png",alt:"Logo PENS",width:40,height:300}),(0,i.jsx)("h1",{className:"font-bold text-xs",children:"PENS Aquaculture Technology"})]})}),(0,i.jsxs)("ul",{className:"w-full flex flex-row items-center justify-evenly text-xs mt-4 gap-4",children:[(0,i.jsx)("li",{className:"flex-1 text-center rounded py-2 border-b-4 border-blue-800 hover:border-blue-400 ".concat(defineStyleNav("users")),children:(0,i.jsx)(l(),{href:"/admin/users",children:(0,i.jsx)("p",{children:"Users"})})}),(0,i.jsx)("li",{className:"flex-1 text-center rounded py-2 border-b-4 border-blue-800 hover:border-blue-400 ".concat(defineStyleNav("ponds")),children:(0,i.jsx)(l(),{href:"/admin/ponds",children:(0,i.jsx)("p",{children:"Tambak"})})}),(0,i.jsx)("li",{className:"flex-1 text-center rounded py-2 border-b-4 border-blue-800 hover:border-blue-400 ".concat(defineStyleNav("profile")),children:(0,i.jsx)(l(),{href:"/admin/profile",children:(0,i.jsx)("p",{children:"Akun"})})})]})]})},d=n(98440),u=n(18953),layouts_AdminLayout=function(e){let{children:t}=e,n=(0,c.useRouter)(),checkLoggedIn=()=>{let e=d.Z.getCookie("access_token"),t=d.Z.getCookie("username"),i=d.Z.getCookie("role");return e?"admin"==t&&i?void 0:(u.ZP.info({content:"You haven't admin access!"}),n.replace("/dashboard")):(u.ZP.info({content:"You have to logged in first!"}),n.replace("/"))};return(0,o.useEffect)(()=>{checkLoggedIn()},[]),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"m-auto w-11/12 md:w-10/12 lg:8/12 xl:w-6/12",children:[(0,i.jsx)(Header,{}),t]})})}},2744:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Auth}});var i=n(28598),o=n(1887),s=n.n(o),r=n(81013),a=n(82684),l=n(9712),c=n(4289),d=n(30621),u=n(12691),f=n.n(u),AdminPondCards=function(e){let[t,n]=(0,a.useState)(),[o,s]=(0,a.useState)(),[r,u]=(0,a.useState)(0),getLocation=async()=>{l.SM.getCityById({cityId:e.cityId,isNotify:!1}).then(e=>{e&&(n(e.data),l.Rb.getProvinceById({provinceId:e.data.provinceId,isNotify:!1}).then(e=>{e&&s(e.data)}))})},getPools=async()=>{l.jf.getPoolsByPondIdAdmin({isNotify:!1,pondId:e._id}).then(e=>{e&&u(e.data.length)})};return(0,a.useEffect)(()=>{getLocation(),getPools()},[e]),(0,i.jsxs)("div",{className:"bg-blue-700 rounded-xl border-blue-200 border-2 p-4 text-white",children:[(0,i.jsx)("h4",{className:"text-xl font-white",children:e.pondsName}),(0,i.jsxs)("div",{className:"flex flex-row gap-2 mt-2",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(null==t?void 0:t.cityName)?(0,i.jsx)("p",{className:"text-xs font-semibold",children:(0,c.Z)((null==t?void 0:t.cityName.toLowerCase())||"")}):(0,i.jsx)(d.Z.Button,{active:!0,size:"small",shape:"default",block:!1}),(null==o?void 0:o.provinceName)?(0,i.jsx)("p",{className:"text-xs font-light",children:(0,c.Z)((null==o?void 0:o.provinceName.toLowerCase())||"")}):(0,i.jsx)(d.Z.Button,{active:!0,size:"small",shape:"default",block:!1})]}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{children:"Jumlah Kolam"}),(0,i.jsx)("p",{className:"text-4xl font-bold",children:r})]})]}),(0,i.jsx)("div",{className:"flex flex-row gap-4 w-full",children:(0,i.jsx)(f(),{className:"flex-1",href:"/admin/ponds/"+e._id,children:(0,i.jsx)("button",{className:"w-full py-2 bg-blue-600 text-white rounded-xl border-2 border-white",children:"Buka"})})})]})},p=n(14655),g=n(70877),y=n(33612),m=n(24788),ponds_AdminPonds=function(){let[e,t]=(0,a.useState)(),[n,o]=(0,a.useState)(),[s,r]=(0,a.useState)(),[c,d]=(0,a.useState)(""),[u,f]=(0,a.useState)(""),[v,h]=(0,a.useState)(""),findPonds=async(e,n,i)=>{l.ff.getAllNoQueryPonds({isNotify:!1,pondsName:e,limit:9999,page:1,cityId:n,provinceId:i}).then(e=>{if(!e)return t([]);t(e.data),console.log(e)})},findProvince=async e=>{l.Rb.getAllProvinces({isNotify:!1,provinceName:e}).then(e=>{if(!e)return o([]);o(e.data)})};return(0,a.useEffect)(()=>{findPonds("","",""),findProvince("")},[]),(0,i.jsxs)("div",{className:"mt-8 px-2 lg:w-full lg:m-auto lg:mt-8 pb-16",children:[(0,i.jsx)("div",{className:"w-full mt-16 flex flex-row justify-between items-center",children:(0,i.jsx)("h2",{className:"text-2xl font-semibold",children:"Daftar Tambak"})}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("p",{children:"Cari Tambak"}),(0,i.jsx)("div",{className:"flex flex-row",children:(0,i.jsx)(y.default,{onChange:e=>{h(e.target.value),findPonds(e.target.value,"",c)},className:"flex-5",placeholder:"Cari nama tambak anda..."})})]}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,i.jsx)("label",{className:"text-sm w-24",htmlFor:"prov_list",children:"Pilih Propinsi"}),"DAI",(0,i.jsx)(m.default,{value:c,defaultValue:"Pilih Provinsi",style:{width:200,margin:"10px 0"},onChange:e=>{d(e),findPonds(v,"",e),l.SM.getAllCitiesByProvinceId({isNotify:!1,provinceId:e}).then(e=>{if(!e)return r([]);r(e.data)})},options:null==n?void 0:n.map(e=>({value:e._id,label:e.provinceName}))}),(0,i.jsx)("button",{onClick:()=>{d(""),findPonds(v,u,"")},className:"text-xl",children:(0,i.jsx)(g.default,{className:"text-white bg-red-500 hover:text-red-500 hover:bg-white rounded-full"})})]}),c&&(0,i.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,i.jsx)("label",{className:"text-sm w-24",htmlFor:"prov_list",children:"Pilih Kota"}),(0,i.jsx)(m.default,{value:u,defaultValue:"Pilih Kota",style:{width:200},onChange:(e,t)=>{f(e),findPonds(v,e,"")},options:null==s?void 0:s.map(e=>({value:e._id,label:e.cityName}))}),(0,i.jsx)("button",{onClick:()=>f(""),className:"text-xl",children:(0,i.jsx)(g.default,{className:"text-white bg-red-500 hover:text-red-500 hover:bg-white rounded-full"})})]})]})}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:null==e?void 0:e.map((e,t)=>(0,a.createElement)(AdminPondCards,{listRefresher:()=>findPonds(v,u,c),...e,key:t}))}),!(null==e?void 0:e.length)&&(0,i.jsx)(p.Z,{message:"Tambak tidak ditemukan"})]})};function Auth(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s(),{children:[(0,i.jsx)("title",{children:"Daftar Tambak - PENS Aquaculture Technology"}),(0,i.jsx)("meta",{name:"description",content:"Pascasarjana Politeknik Elektronika Negeri Surabaya"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(r.Z,{children:(0,i.jsx)(ponds_AdminPonds,{})})]})}},9712:function(e,t,n){"use strict";n.d(t,{gx:function(){return a},SM:function(){return u},C8:function(){return g},ff:function(){return c},jf:function(){return f},Rb:function(){return d},pv:function(){return p},Q:function(){return l},vn:function(){return serviceInstance}});let i="https://be.aquaculturepens.com";var o=n(98440),s=n(18953),r=n(50112);async function login(e){let{data:t}=await serviceInstance(e.isNotify).post("/api/v1/auth/login",e.data);return t}async function register(e){let{data:t}=await serviceInstance(e.isNotify).post("/api/v1/auth/register",e.data);return t}let a={login:login,register:register};async function getAllUserProfiles(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/users/all");return t}async function getMyProfile(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/users");return t}let l={getMyProfile:getMyProfile,getAllUserProfiles:getAllUserProfiles};async function getAllPonds(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/ponds?pondsName="+e.pondsName+"&page="+e.page+"&limit="+e.limit+"&provinceId="+e.provinceId+"&cityId="+e.cityId);return t}async function getAllNoQueryPonds(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/ponds/all-ponds?pondsName="+e.pondsName+"&page="+e.page+"&limit="+e.limit+"&provinceId="+e.provinceId+"&cityId="+e.cityId);return t}async function getPondById(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/ponds/pondsId/"+e.pondsId);return t}async function getAllPondsByCityId(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/ponds/cityId/"+e.cityId);return t}async function createPonds(e){let{data:t}=await serviceInstance(e.isNotify).post("/api/v1/ponds?pondsName",e.data);return t}async function deletePondsById(e){let{data:t}=await serviceInstance(e.isNotify).delete("/api/v1/ponds/pondsId/"+e.pondsId);return t}let c={getAllPonds:getAllPonds,createPonds:createPonds,getAllNoQueryPonds:getAllNoQueryPonds,getAllPondsByCityId:getAllPondsByCityId,deletePondsById:deletePondsById,getPondById:getPondById};async function getAllProvinces(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/provinces?provinceName="+e.provinceName);return t}async function getProvinceById(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/provinces/provinceId/"+e.provinceId);return t}let d={getAllProvinces:getAllProvinces,getProvinceById:getProvinceById};async function getAllCities(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/cities?cityName=");return t}async function getCityById(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/cities/cityId/"+e.cityId);return t}async function getAllCitiesByProvinceId(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/cities/provinceId/"+e.provinceId);return t}let u={getAllCities:getAllCities,getAllCitiesByProvinceId:getAllCitiesByProvinceId,getCityById:getCityById};async function getAllPools(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/pools?poolsName="+e.poolsName);return t}async function createPools(e){let{data:t}=await serviceInstance(e.isNotify).post("/api/v1/pools",e.data);return t}async function getPoolsByPondId(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/pools/pondsId/"+e.pondId);return t}async function getPoolsById(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/pools/poolsId/"+e.poolsId);return t}async function bindPools(e){let{data:t}=await serviceInstance(e.isNotify).put("/api/v1/pools/bind/poolsId/"+e.poolsId,e.data);return t}async function getPoolsByPondIdAdmin(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/pools/pondsIdAdmin/"+e.pondId);return t}let f={getAllPools:getAllPools,getPoolsByPondId:getPoolsByPondId,createPools:createPools,getPoolsById:getPoolsById,getPoolsByPondIdAdmin:getPoolsByPondIdAdmin,bindPools:bindPools};async function getAllSampling(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/sample/poolsId/".concat(e.poolsId,"?from=").concat(e.from,"&to=").concat(e.to,"&limit=").concat(e.limit,"&page=").concat(e.page,"&newestTime=").concat(e.newestTime));return t}async function getTodaySampling(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/sample/poolsId/".concat(e.poolsId,"/today"));return t}let p={getTodaySampling:getTodaySampling,getAllSampling:getAllSampling};async function getAllMonitoring(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/monitor/poolsId/".concat(e.poolsId,"?from=").concat(e.from,"&to=").concat(e.to,"&limit=").concat(e.limit,"&page=").concat(e.page,"&newestTime=").concat(e.newestTime));return t}async function getTodayMonitoring(e){let{data:t}=await serviceInstance(e.isNotify).get("/api/v1/monitor/poolsId/".concat(e.poolsId,"/today"));return t}let g={getTodayMonitoring:getTodayMonitoring,getAllMonitoring:getAllMonitoring};r.Z.create({baseURL:i,timeout:1e4});let serviceInstance=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"":o.Z.getCookie("access_token"),a=r.Z.create({baseURL:i,timeout:1e4,headers:{Authorization:"Bearer "+n,"Access-Control-Allow-Origin":"*"}});return a.interceptors.response.use(function(t){return e&&s.ZP.success({content:t.data.message}),t},function(t){return e&&s.ZP.error({content:t.response.data.message}),t}),a}},4289:function(e,t){"use strict";t.Z=e=>{let t="";return e.split(" ").forEach(e=>{var n;t+=(null===(n=e[0])||void 0===n?void 0:n.toUpperCase())+e.slice(1)+" "}),t}},98440:function(e,t){"use strict";t.Z={setCookie:(e,t,n)=>{let i="";if(n){let e=new Date;e.setTime(e.getTime()+864e5*n),i="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"},getCookie:e=>{let t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},deleteCookie:e=>{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}}}},function(e){e.O(0,[109,112,423,164,612,97,838,621,59,774,888,179],function(){return e(e.s=73383)}),_N_E=e.O()}]);